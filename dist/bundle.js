!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.plus=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.times=function(e){return new t(this.x*e,this.y*e)},t}(),o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(t,e){for(var n,r,i,s,u=[],a=2;a<arguments.length;a++)u[a-2]=arguments[a];var l=document.createElement(t);try{for(var c=o(Object.keys(e)),f=c.next();!f.done;f=c.next()){var p=f.value;l.setAttribute(p,e[p])}}catch(t){n={error:t}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}try{for(var y=o(u),h=y.next();!h.done;h=y.next()){var d=h.value;l.appendChild(d)}}catch(t){i={error:t}}finally{try{h&&!h.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}return l}var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=function(){function t(t,e,n){this.level=t,this.actors=e,this.status=n}return t.start=function(e){return new t(e,e.startActors,"playing")},Object.defineProperty(t.prototype,"player",{get:function(){return this.actors.find((function(t){return"player"===t.type}))},enumerable:!1,configurable:!0}),t.prototype.update=function(e,n){var r,o,i=this,u=this.actors.map((function(t){return t.update(e,i,n)})),a=new t(this.level,u,this.status);if("playing"!==a.status)return a;var l,c,f=a.player;if(this.level.touches(f.pos,f.size,"lava"))return new t(this.level,u,"lost");try{for(var p=s(u),y=p.next();!y.done;y=p.next()){var h=y.value;h!==f&&(c=f,(l=h).pos.x+l.size.x>c.pos.x&&l.pos.x<c.pos.x+c.size.x&&l.pos.y+l.size.y>c.pos.y&&l.pos.y<c.pos.y+c.size.y)&&(a=h.collide(a))}}catch(t){r={error:t}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return a},t}(),a=function(){function t(t,e,n){this.pos=t,this.basePos=e,this.wobble=n,this.size=new r(.6,.6)}return Object.defineProperty(t.prototype,"type",{get:function(){return"coin"},enumerable:!1,configurable:!0}),t.create=function(e){var n=e.plus(new r(.2,.1));return new t(n,n,Math.random()*Math.PI*2)},t.prototype.collide=function(t){var e=this,n=t.actors.filter((function(t){return t!==e})),r=t.status;return n.some((function(t){return"coin"===t.type}))||(r="won"),new u(t.level,n,r)},t.prototype.update=function(e){var n=this.wobble+e*f,o=Math.sin(n)*p;return new t(this.basePos.plus(new r(0,o)),this.basePos,n)},t}(),l=function(){function t(t,e,n){this.speed=e,this.pos=t,this.reset=n,this.size=new r(1,1)}return Object.defineProperty(t.prototype,"type",{get:function(){return"lava"},enumerable:!1,configurable:!0}),t.create=function(e,n){switch(n){case"=":return new t(e,new r(2,0));case"|":return new t(e,new r(0,2));case"v":return new t(e,new r(0,3),e)}},t.prototype.collide=function(t){return new u(t.level,t.actors,"lost")},t.prototype.update=function(e,n){var r=this.pos.plus(this.speed.times(e));return n.level.touches(r,this.size,"wall")?this.reset?new t(this.reset,this.speed,this.reset):new t(this.pos,this.speed.times(-1)):new t(r,this.speed,this.reset)},t}(),c={".":"empty","#":"wall","+":"lava","@":function(){function t(t,e){this.pos=t,this.speed=e,this.size=new r(.8,1.5)}return Object.defineProperty(t.prototype,"type",{get:function(){return"player"},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e.plus(new r(0,-.5)),new r(0,0))},t.prototype.update=function(e,n,o){var i=0;o.ArrowLeft&&(i-=y),o.ArrowRight&&(i+=y);var s=this.pos,u=s.plus(new r(i*e,0));n.level.touches(u,this.size,"wall")||(s=u);var a=this.speed.y+e*h,l=s.plus(new r(0,a*e));return n.level.touches(l,this.size,"wall")?a=o.ArrowUp&&a>0?-d:0:s=l,new t(s,new r(i,a))},t}(),o:a,"=":l,v:l,"|":l},f=8,p=.07,y=7,h=30,d=17,v=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},w=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t},m=function(){function t(t){var e=this,n=t.trim().split("\n").map((function(t){return w(t)}));this.height=n.length,this.width=n[0].length,this.startActors=[],this.rows=n.map((function(t,n){return t.map((function(t,o){var i=c[t];return"string"==typeof i?i:(e.startActors.push(i.create(new r(o,n),t)),"empty")}))}))}return t.prototype.touches=function(t,e,n){for(var r=Math.floor(t.x),o=Math.ceil(t.x+e.x),i=Math.floor(t.y),s=Math.ceil(t.y+e.y),u=i;u<s;u++)for(var a=r;a<o;a++){if((a<0||a>=this.width||u<0||u>=this.height?"wall":this.rows[u][a])==n)return!0}return!1},t}();var b=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},g=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function x(t){var e=null;requestAnimationFrame((function n(r){if(null!==e){var o=Math.min(r-e,100)/1e3;if(!1===t(o))return}e=r,requestAnimationFrame(n)}))}function S(t,e){var n=new e(document.body,t),r=u.start(t),o=1,i="yes",s=function(t){var e=Object.create(null);function n(n){t.includes(n.key)&&(e[n.key]="keydown"===n.type,n.preventDefault())}return window.addEventListener("keydown",n),window.addEventListener("keyup",n),e.unregister=function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",n)},e}(["ArrowLeft","ArrowRight","ArrowUp"]);return new Promise((function(t){function e(t){"Escape"===t.key&&(t.preventDefault(),"no"===i?(i="yes",x(u)):i=(i="yes")?"pausing":"yes")}function u(u){return"pausing"===i?(i="no",!1):(r=r.update(u,s),n.syncState(r),"playing"===r.status||(o>0?(o-=u,!0):(n.clear(),window.removeEventListener("keydown",e),s.unregister(),t(r.status),!1)))}window.addEventListener("keydown",e),x(u)}))}var P=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},k=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P(arguments[e]));return t};!function(t,e){b(this,void 0,void 0,(function(){var n,r,o;return g(this,(function(i){switch(i.label){case 0:n=5,r=0,i.label=1;case 1:return r<t.length?[4,S(new m(t[r]),e)]:[3,4];case 2:"won"===(o=i.sent())&&r++,"lost"===o&&(console.log(--n+" жизней"),0===n&&(console.log("ты проиграл"),r=0,n=5)),i.label=3;case 3:return[3,1];case 4:return console.log("ты победил!"),[2]}}))}))}(["\n......................\n..#................#..\n..#................#..\n..#.........o.o....#..\n..#.@......#####...#..\n..#####............#..\n......#++++++++++++#..\n......##############..\n......................","\n.....................................................................................################.................................................v\n......................................................................................###.v.....v......................................................\n........................................................................................v..............................................................\n.......................................................................................................................................................\n#...............................................................................................................oo....................................o\n###..................................o........................................................................................o..o....................#\n##..............................o....#.....o......................................................=.....o.o.o.........................o....o.........##\n##..............................#....#.....#............................................................#####.........ooooooo.........##...##........##\n##..............................#++++++++++#........................................o..o..o.........o................########....##..................##\n##.............................#############................................o.......########.......##...............................................###\n##.............................................................oo.........#####.....................................................................###\n##@...............######......................................####.....................|......oooo.................................................####\n###............o........................=...................................................#..#...............=.................................######\n#################+++++++#####################################################################+++++#####################################################\n#######################################################################################################################################################\n"],function(){function t(t,e){this.dom=i("div",{class:"game"},function(t){return i.apply(void 0,k(["table",{class:"background",style:"width: "+20*t.width+"px"}],t.rows.map((function(t){return i.apply(void 0,k(["tr",{style:"height: 20px"}],t.map((function(t){return i("td",{class:t})}))))}))))}(e)),this.actorLayer=null,t.appendChild(this.dom)}return t.prototype.clear=function(){this.dom.remove()},t.prototype.syncState=function(t){var e,n;null===(e=this.actorLayer)||void 0===e||e.remove(),this.actorLayer=(n=t.actors,i.apply(void 0,k(["div",{}],n.map((function(t){var e=i("div",{class:"actor "+t.type});return e.style.width=20*t.size.x+"px",e.style.height=20*t.size.y+"px",e.style.left=20*t.pos.x+"px",e.style.top=20*t.pos.y+"px",e}))))),this.dom.appendChild(this.actorLayer),this.dom.className="game "+t.status,this.scrollPlayerIntoView(t)},t.prototype.scrollPlayerIntoView=function(t){var e=this.dom.clientWidth,n=this.dom.clientHeight,r=e/3,o=this.dom.scrollLeft,i=o+e,s=this.dom.scrollTop,u=s+n,a=t.player,l=a.pos.plus(a.size.times(.5)).times(20);l.x<o+r?this.dom.scrollLeft=l.x-r:l.x>i-r&&(this.dom.scrollLeft=l.x+r-e),l.y<s+r?this.dom.scrollTop=l.y-r:l.x>u-r&&(this.dom.scrollTop=l.y+r-n)},t}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xldmVscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVmVjLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9TdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0b3JzL0NvaW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdG9ycy9MYXZhLnRzIiwid2VicGFjazovLy8uL3NyYy9jb25zdHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdG9ycy9QbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xldmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9ydW5GdW5jdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpc3RlbmVyLnRzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9EaXNwbGF5cy9ET01EaXNwbGF5LnRzIiwid2VicGFjazovLy8uL3NyYy9kcmF3RnVuY3Rpb25zLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwieCIsInkiLCJ0aGlzIiwicGx1cyIsIm90aGVyIiwiVmVjIiwidGltZXMiLCJmYWN0b3IiLCJlbHQiLCJhdHRycyIsImRvbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImtleXMiLCJhdHRyIiwic2V0QXR0cmlidXRlIiwiY2hpbGRyZW4iLCJjaGlsZCIsImFwcGVuZENoaWxkIiwibGV2ZWwiLCJhY3RvcnMiLCJzdGF0dXMiLCJzdGFydCIsIlN0YXRlIiwic3RhcnRBY3RvcnMiLCJmaW5kIiwiYSIsInR5cGUiLCJ1cGRhdGUiLCJ0aW1lIiwibWFwIiwiYWN0b3IiLCJuZXdTdGF0ZSIsImFjdG9yMSIsImFjdG9yMiIsInBsYXllciIsInRvdWNoZXMiLCJwb3MiLCJzaXplIiwiY29sbGlkZSIsImJhc2VQb3MiLCJ3b2JibGUiLCJDb2luIiwiTWF0aCIsInJhbmRvbSIsIlBJIiwic3RhdGUiLCJmaWx0cmVkIiwiZmlsdGVyIiwic29tZSIsIndvYmJsZVNwZWVkIiwid29iYmxlUG9zIiwic2luIiwid29iYmxlRGlzdCIsInNwZWVkIiwicmVzZXQiLCJjaCIsIkxhdmEiLCJuZXdQb3MiLCJsZXZlbENoYXJzIiwiUGxheWVyIiwieFNwZWVkIiwiQXJyb3dMZWZ0IiwicGxheWVyWFNwZWVkIiwiQXJyb3dSaWdodCIsIm1vdmVkWCIsInlTcGVlZCIsImdyYXZpdHkiLCJtb3ZlZFkiLCJBcnJvd1VwIiwianVtcFNwZWVkIiwicGxhbiIsInJvd3MiLCJ0cmltIiwic3BsaXQiLCJoZWlnaHQiLCJsZW5ndGgiLCJ3aWR0aCIsInJvdyIsInB1c2giLCJ4U3RhcnQiLCJmbG9vciIsInhFbmQiLCJjZWlsIiwieVN0YXJ0IiwieUVuZCIsInJ1bkFuaW1hdGlvbiIsImZyYW1lRnVuYyIsImxhc3RUaW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZnJhbWUiLCJ0aW1lU3RlcCIsIm1pbiIsInJ1bkxldmVsIiwiRGlzcGxheSIsImRpc3BsYXkiLCJib2R5IiwiZW5kaW5nIiwicnVubmluZyIsImFycm93S2V5cyIsImRvd24iLCJ0cmFjayIsImV2ZW50IiwiaW5jbHVkZXMiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bnJlZ2lzdGVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRyYWNrS2V5cyIsIlByb21pc2UiLCJyZXNvbHZlIiwiZXNjSGFuZGxlciIsInN5bmNTdGF0ZSIsImNsZWFyIiwicGxhbnMiLCJsaXZlcyIsImNvbnNvbGUiLCJsb2ciLCJydW5HYW1lIiwicGFyZW50IiwiY2xhc3MiLCJzdHlsZSIsImRyYXdHcmlkIiwiYWN0b3JMYXllciIsInJlbW92ZSIsInJlY3QiLCJsZWZ0IiwidG9wIiwiY2xhc3NOYW1lIiwic2Nyb2xsUGxheWVySW50b1ZpZXciLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIm1hcmdpbiIsInNjcm9sbExlZnQiLCJyaWdodCIsInNjcm9sbFRvcCIsImJvdHRvbSIsImNlbnRlciJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZE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QUFPekksRUFBSW9JLEVBQVMxRCxJQUcvQyxFQWpEQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY29uc3QgbGV2ZWwxID0gYFxyXG4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXHJcbi4uIy4uLi4uLi4uLi4uLi4uLi4jLi5cclxuLi4jLi4uLi4uLi4uLi4uLi4uLiMuLlxyXG4uLiMuLi4uLi4uLi5vLm8uLi4uIy4uXHJcbi4uIy5ALi4uLi4uIyMjIyMuLi4jLi5cclxuLi4jIyMjIy4uLi4uLi4uLi4uLiMuLlxyXG4uLi4uLi4jKysrKysrKysrKysrIy4uXHJcbi4uLi4uLiMjIyMjIyMjIyMjIyMjLi5cclxuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLmBcclxuXHJcbmV4cG9ydCBjb25zdCBsZXZlbDIgPSBgXHJcbi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMjIyMjIyMjIyMjIyMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLnZcclxuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMudi4uLi4udi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxyXG4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4udi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXHJcbi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cclxuIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLm9vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4ub1xyXG4jIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uby4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5vLi5vLi4uLi4uLi4uLi4uLi4uLi4uLi4jXHJcbiMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uby4uLi4jLi4uLi5vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uPS4uLi4uby5vLm8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uby4uLi5vLi4uLi4uLi4uIyNcclxuIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jLi4uLiMuLi4uLiMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMjIy4uLi4uLi4uLm9vb29vb28uLi4uLi4uLi4jIy4uLiMjLi4uLi4uLi4jI1xyXG4jIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiMrKysrKysrKysrIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5vLi5vLi5vLi4uLi4uLi4uby4uLi4uLi4uLi4uLi4uLi4jIyMjIyMjIy4uLi4jIy4uLi4uLi4uLi4uLi4uLi4uLiMjXHJcbiMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMjIyMjIyMjIyMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5vLi4uLi4uLiMjIyMjIyMjLi4uLi4uLiMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyNcclxuIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4ub28uLi4uLi4uLi4jIyMjIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiMjI1xyXG4jI0AuLi4uLi4uLi4uLi4uLi4jIyMjIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiMjIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi58Li4uLi4ub29vby4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMjXHJcbiMjIy4uLi4uLi4uLi4uLm8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi49Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIy4uIy4uLi4uLi4uLi4uLi4uLj0uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMjIyNcclxuIyMjIyMjIyMjIyMjIyMjIyMrKysrKysrIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjKysrKysjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbmAiLCJcclxuZXhwb3J0IGNsYXNzIFZlYyB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gIH1cclxuXHJcbiAgcGx1cyhvdGhlcjogVmVjKSB7XHJcbiAgICByZXR1cm4gbmV3IFZlYyh0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55KVxyXG4gIH1cclxuXHJcbiAgdGltZXMoZmFjdG9yOiBudW1iZXIpIHtcclxuICAgIHJldHVybiBuZXcgVmVjKHRoaXMueCAqIGZhY3RvciwgdGhpcy55ICogZmFjdG9yKVxyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgSUFjdG9yIH0gZnJvbSAnLi90cy9pbmRleCdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvdmVybGFwKGFjdG9yMTogSUFjdG9yLCBhY3RvcjI6IElBY3Rvcikge1xyXG4gIHJldHVybiBhY3RvcjEucG9zLnggKyBhY3RvcjEuc2l6ZS54ID4gYWN0b3IyLnBvcy54ICYmXHJcbiAgICBhY3RvcjEucG9zLnggPCBhY3RvcjIucG9zLnggKyBhY3RvcjIuc2l6ZS54ICYmXHJcbiAgICBhY3RvcjEucG9zLnkgKyBhY3RvcjEuc2l6ZS55ID4gYWN0b3IyLnBvcy55ICYmXHJcbiAgICBhY3RvcjEucG9zLnkgPCBhY3RvcjIucG9zLnkgKyBhY3RvcjIuc2l6ZS55O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWx0KG5hbWU6IHN0cmluZywgYXR0cnM6IGFueSwgLi4uY2hpbGRyZW46IEhUTUxFbGVtZW50W10pOiBIVE1MRWxlbWVudCB7XHJcbiAgbGV0IGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XHJcblxyXG4gIGZvciAobGV0IGF0dHIgb2YgT2JqZWN0LmtleXMoYXR0cnMpKSB7XHJcbiAgICBkb20uc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKTtcclxuICB9XHJcblxyXG4gIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XHJcbiAgICBkb20uYXBwZW5kQ2hpbGQoY2hpbGQpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRvbTtcclxufSIsImltcG9ydCB7IExldmVsIH0gZnJvbSAnLi9MZXZlbCdcclxuaW1wb3J0IHsgb3ZlcmxhcCB9IGZyb20gJy4vaGVscGVycyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhdGUge1xyXG4gIGxldmVsOiBMZXZlbDtcclxuICBhY3RvcnM6IGFueTtcclxuICBzdGF0dXM6IHN0cmluZztcclxuICBzdGFydDogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcihsZXZlbDogTGV2ZWwsIGFjdG9yczogYW55LCBzdGF0dXM6IHN0cmluZykge1xyXG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xyXG4gICAgdGhpcy5hY3RvcnMgPSBhY3RvcnM7XHJcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzdGFydChsZXZlbDogTGV2ZWwpIHtcclxuICAgIHJldHVybiBuZXcgU3RhdGUobGV2ZWwsIGxldmVsLnN0YXJ0QWN0b3JzLCAncGxheWluZycpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHBsYXllcigpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdG9ycy5maW5kKGEgPT4gYS50eXBlID09PSAncGxheWVyJyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUodGltZTogbnVtYmVyLCBrZXlzOiBhbnkpIHtcclxuICAgIGxldCBhY3RvcnMgPSB0aGlzLmFjdG9yc1xyXG4gICAgICAubWFwKGFjdG9yID0+IGFjdG9yLnVwZGF0ZSh0aW1lLCB0aGlzLCBrZXlzKSk7XHJcbiAgICBsZXQgbmV3U3RhdGUgPSBuZXcgU3RhdGUodGhpcy5sZXZlbCwgYWN0b3JzLCB0aGlzLnN0YXR1cyk7XHJcblxyXG4gICAgaWYgKG5ld1N0YXRlLnN0YXR1cyAhPT0gJ3BsYXlpbmcnKSByZXR1cm4gbmV3U3RhdGU7XHJcblxyXG4gICAgbGV0IHBsYXllciA9IG5ld1N0YXRlLnBsYXllcjtcclxuICAgIGlmICh0aGlzLmxldmVsLnRvdWNoZXMocGxheWVyLnBvcywgcGxheWVyLnNpemUsICdsYXZhJykpIHtcclxuICAgICAgcmV0dXJuIG5ldyBTdGF0ZSh0aGlzLmxldmVsLCBhY3RvcnMsICdsb3N0JylcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBhY3RvciBvZiBhY3RvcnMpIHtcclxuICAgICAgaWYgKGFjdG9yICE9PSBwbGF5ZXIgJiYgb3ZlcmxhcChhY3RvciwgcGxheWVyKSkge1xyXG4gICAgICAgIG5ld1N0YXRlID0gYWN0b3IuY29sbGlkZShuZXdTdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXdTdGF0ZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyB3b2JibGVEaXN0LCB3b2JibGVTcGVlZCB9IGZyb20gJy4vLi4vY29uc3RzJztcclxuaW1wb3J0IHsgVmVjIH0gZnJvbSAnLi4vVmVjJ1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL1N0YXRlJ1xyXG5cclxuZXhwb3J0IGNsYXNzIENvaW4ge1xyXG4gIHBvczogVmVjO1xyXG4gIGJhc2VQb3M6IFZlYztcclxuICB3b2JibGU6IG51bWJlcjtcclxuICBzaXplOiBWZWM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvczogVmVjLCBiYXNlUG9zOiBWZWMsIHdvYmJsZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnBvcyA9IHBvcztcclxuICAgIHRoaXMuYmFzZVBvcyA9IGJhc2VQb3M7XHJcbiAgICB0aGlzLndvYmJsZSA9IHdvYmJsZTtcclxuICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWMoMC42LCAwLjYpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKSB7XHJcbiAgICByZXR1cm4gJ2NvaW4nO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZShwb3M6IFZlYykge1xyXG4gICAgbGV0IGJhc2VQb3MgPSBwb3MucGx1cyhuZXcgVmVjKDAuMiwgMC4xKSk7XHJcbiAgICByZXR1cm4gbmV3IENvaW4oYmFzZVBvcywgYmFzZVBvcywgTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyKVxyXG4gIH1cclxuXHJcbiAgY29sbGlkZShzdGF0ZTogU3RhdGUpOiBTdGF0ZSB7XHJcbiAgICBsZXQgZmlsdHJlZCA9IHN0YXRlLmFjdG9ycy5maWx0ZXIoYSA9PiBhICE9PSB0aGlzKTtcclxuICAgIGxldCBzdGF0dXMgPSBzdGF0ZS5zdGF0dXM7XHJcblxyXG4gICAgaWYgKCFmaWx0cmVkLnNvbWUoYSA9PiBhLnR5cGUgPT09ICdjb2luJykpIHtcclxuICAgICAgc3RhdHVzID0gJ3dvbic7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFN0YXRlKHN0YXRlLmxldmVsLCBmaWx0cmVkLCBzdGF0dXMpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKHRpbWU6IG51bWJlcikge1xyXG4gICAgbGV0IHdvYmJsZSA9IHRoaXMud29iYmxlICsgdGltZSAqIHdvYmJsZVNwZWVkO1xyXG4gICAgbGV0IHdvYmJsZVBvcyA9IE1hdGguc2luKHdvYmJsZSkgKiB3b2JibGVEaXN0O1xyXG5cclxuICAgIHJldHVybiBuZXcgQ29pbih0aGlzLmJhc2VQb3MucGx1cyhuZXcgVmVjKDAsIHdvYmJsZVBvcykpLCB0aGlzLmJhc2VQb3MsIHdvYmJsZSk7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBWZWMgfSBmcm9tICcuLi9WZWMnXHJcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vU3RhdGUnXHJcbmltcG9ydCB7IElMYXZhQ2ggfSBmcm9tICcuLi90cydcclxuXHJcbmV4cG9ydCBjbGFzcyBMYXZhIHtcclxuICBwb3M6IFZlYztcclxuICBzcGVlZDogVmVjO1xyXG4gIHJlc2V0PzogVmVjO1xyXG4gIHNpemU6IFZlYztcclxuXHJcbiAgY29uc3RydWN0b3IocG9zOiBWZWMsIHNwZWVkOiBWZWMsIHJlc2V0PzogVmVjKSB7XHJcbiAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICB0aGlzLnBvcyA9IHBvcztcclxuICAgIHRoaXMucmVzZXQgPSByZXNldDtcclxuICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWMoMSwgMSk7XHJcbiAgfVxyXG5cclxuICBnZXQgdHlwZSgpIHtcclxuICAgIHJldHVybiAnbGF2YSc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlKHBvczogVmVjLCBjaDogSUxhdmFDaCkge1xyXG4gICAgc3dpdGNoIChjaCkge1xyXG4gICAgICBjYXNlICc9JzpcclxuICAgICAgICByZXR1cm4gbmV3IExhdmEocG9zLCBuZXcgVmVjKDIsIDApKTtcclxuICAgICAgY2FzZSAnfCc6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMYXZhKHBvcywgbmV3IFZlYygwLCAyKSk7XHJcbiAgICAgIGNhc2UgJ3YnOlxyXG4gICAgICAgIHJldHVybiBuZXcgTGF2YShwb3MsIG5ldyBWZWMoMCwgMyksIHBvcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlKHN0YXRlOiBTdGF0ZSk6IFN0YXRlIHtcclxuICAgIHJldHVybiBuZXcgU3RhdGUoc3RhdGUubGV2ZWwsIHN0YXRlLmFjdG9ycywgJ2xvc3QnKTtcclxuICB9O1xyXG5cclxuICB1cGRhdGUodGltZTogbnVtYmVyLCBzdGF0ZTogU3RhdGUpOiBMYXZhIHtcclxuICAgIGxldCBuZXdQb3MgPSB0aGlzLnBvcy5wbHVzKHRoaXMuc3BlZWQudGltZXModGltZSkpO1xyXG4gICAgaWYgKCFzdGF0ZS5sZXZlbC50b3VjaGVzKG5ld1BvcywgdGhpcy5zaXplLCAnd2FsbCcpKSB7XHJcbiAgICAgIHJldHVybiBuZXcgTGF2YShuZXdQb3MsIHRoaXMuc3BlZWQsIHRoaXMucmVzZXQpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAodGhpcy5yZXNldCkge1xyXG4gICAgICByZXR1cm4gbmV3IExhdmEodGhpcy5yZXNldCwgdGhpcy5zcGVlZCwgdGhpcy5yZXNldCk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBMYXZhKHRoaXMucG9zLCB0aGlzLnNwZWVkLnRpbWVzKC0xKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvaW4gfSBmcm9tICcuL2FjdG9ycy9Db2luJ1xyXG5pbXBvcnQgeyBMYXZhIH0gZnJvbSAnLi9hY3RvcnMvTGF2YSdcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi9hY3RvcnMvUGxheWVyJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGxldmVsQ2hhcnM6IHtcclxuICAnLic6ICdlbXB0eScsXHJcbiAgJyMnOiAnd2FsbCcsXHJcbiAgJysnOiAnbGF2YScsXHJcbiAgJ0AnOiB0eXBlb2YgUGxheWVyLFxyXG4gICdvJzogdHlwZW9mIENvaW4sXHJcbiAgJz0nOiB0eXBlb2YgTGF2YSxcclxuICAndic6IHR5cGVvZiBMYXZhLFxyXG4gICd8JzogdHlwZW9mIExhdmEsXHJcbn0gPSB7XHJcbiAgJy4nOiAnZW1wdHknLFxyXG4gICcjJzogJ3dhbGwnLFxyXG4gICcrJzogJ2xhdmEnLFxyXG4gICdAJzogUGxheWVyLFxyXG4gICdvJzogQ29pbixcclxuICAnPSc6IExhdmEsXHJcbiAgJ3YnOiBMYXZhLFxyXG4gICd8JzogTGF2YSxcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBzY2FsZSA9IDIwO1xyXG5cclxuZXhwb3J0IGNvbnN0IHdvYmJsZVNwZWVkID0gODtcclxuXHJcbmV4cG9ydCBjb25zdCB3b2JibGVEaXN0ID0gMC4wNztcclxuXHJcbmV4cG9ydCBjb25zdCBwbGF5ZXJYU3BlZWQgPSA3O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdyYXZpdHkgPSAzMDtcclxuXHJcbmV4cG9ydCBjb25zdCBqdW1wU3BlZWQgPSAxNzsiLCJpbXBvcnQgeyBncmF2aXR5LCBqdW1wU3BlZWQgfSBmcm9tICcuLy4uL2NvbnN0cyc7XHJcbmltcG9ydCB7IFZlYyB9IGZyb20gJy4uL1ZlYydcclxuaW1wb3J0IHsgcGxheWVyWFNwZWVkIH0gZnJvbSAnLi4vY29uc3RzJztcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9TdGF0ZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcclxuICBwb3M6IFZlYztcclxuICBzcGVlZDogVmVjO1xyXG4gIHNpemU6IFZlYztcclxuXHJcbiAgY29uc3RydWN0b3IocG9zOiBWZWMsIHNwZWVkOiBWZWMpIHtcclxuICAgIHRoaXMucG9zID0gcG9zO1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5zaXplID0gbmV3IFZlYygwLjgsIDEuNSk7XHJcbiAgfVxyXG5cclxuICBnZXQgdHlwZSgpIHsgcmV0dXJuICdwbGF5ZXInIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZShwb3M6IFZlYykge1xyXG4gICAgcmV0dXJuIG5ldyBQbGF5ZXIocG9zLnBsdXMobmV3IFZlYygwLCAtMC41KSksXHJcbiAgICAgIG5ldyBWZWMoMCwgMCkpXHJcbiAgfVxyXG5cclxuICB1cGRhdGUodGltZTogbnVtYmVyLCBzdGF0ZTogU3RhdGUsIGtleXM6IGFueSk6IFBsYXllciB7XHJcbiAgICBsZXQgeFNwZWVkID0gMDtcclxuICAgIGlmIChrZXlzLkFycm93TGVmdCkge1xyXG4gICAgICB4U3BlZWQgLT0gcGxheWVyWFNwZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChrZXlzLkFycm93UmlnaHQpIHtcclxuICAgICAgeFNwZWVkICs9IHBsYXllclhTcGVlZDtcclxuICAgIH1cclxuICAgIGxldCBwb3MgPSB0aGlzLnBvcztcclxuICAgIGxldCBtb3ZlZFggPSBwb3MucGx1cyhuZXcgVmVjKHhTcGVlZCAqIHRpbWUsIDApKTtcclxuXHJcbiAgICBpZiAoIXN0YXRlLmxldmVsLnRvdWNoZXMobW92ZWRYLCB0aGlzLnNpemUsICd3YWxsJykpIHtcclxuICAgICAgcG9zID0gbW92ZWRYO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB5U3BlZWQgPSB0aGlzLnNwZWVkLnkgKyB0aW1lICogZ3Jhdml0eTtcclxuICAgIGxldCBtb3ZlZFkgPSBwb3MucGx1cyhuZXcgVmVjKDAsIHlTcGVlZCAqIHRpbWUpKTtcclxuXHJcbiAgICBpZiAoIXN0YXRlLmxldmVsLnRvdWNoZXMobW92ZWRZLCB0aGlzLnNpemUsICd3YWxsJykpIHtcclxuICAgICAgcG9zID0gbW92ZWRZO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoa2V5cy5BcnJvd1VwICYmIHlTcGVlZCA+IDApIHtcclxuICAgICAgeVNwZWVkID0gLWp1bXBTcGVlZDtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB5U3BlZWQgPSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQbGF5ZXIocG9zLCBuZXcgVmVjKHhTcGVlZCwgeVNwZWVkKSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgVmVjIH0gZnJvbSAnLi9WZWMnXHJcbmltcG9ydCB7IGxldmVsQ2hhcnMgfSBmcm9tICcuL2NvbnN0cydcclxuaW1wb3J0IHsgUExDLCBJQWN0b3IgfSBmcm9tICcuL3RzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIExldmVsIHtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxuICB3aWR0aDogbnVtYmVyO1xyXG4gIHN0YXJ0QWN0b3JzOiBQTENbXTtcclxuICByb3dzOiBzdHJpbmdbXVtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwbGFuOiBzdHJpbmcpIHtcclxuICAgIGxldCByb3dzID0gcGxhbi50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChsID0+IFsuLi5sXSk7XHJcbiAgICB0aGlzLmhlaWdodCA9IHJvd3MubGVuZ3RoO1xyXG4gICAgdGhpcy53aWR0aCA9IHJvd3NbMF0ubGVuZ3RoO1xyXG4gICAgdGhpcy5zdGFydEFjdG9ycyA9IFtdO1xyXG5cclxuICAgIHRoaXMucm93cyA9IHJvd3MubWFwKChyb3c6IHN0cmluZ1tdLCB5OiBudW1iZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHJvdy5tYXAoKGNoOiBzdHJpbmcsIHg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGxldCB0eXBlOiBhbnkgPSBsZXZlbENoYXJzW2NoXTtcclxuICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT0gJ3N0cmluZycpIHsgcmV0dXJuIHR5cGU7IH1cclxuICAgICAgICB0aGlzLnN0YXJ0QWN0b3JzLnB1c2goXHJcbiAgICAgICAgICAodHlwZSBhcyBJQWN0b3IpLmNyZWF0ZShuZXcgVmVjKHgsIHkpLCBjaClcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiAnZW1wdHknO1xyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB0b3VjaGVzKHBvczogVmVjLCBzaXplOiBWZWMsIHR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IHhTdGFydCA9IE1hdGguZmxvb3IocG9zLngpO1xyXG4gICAgbGV0IHhFbmQgPSBNYXRoLmNlaWwocG9zLnggKyBzaXplLngpO1xyXG4gICAgbGV0IHlTdGFydCA9IE1hdGguZmxvb3IocG9zLnkpO1xyXG4gICAgbGV0IHlFbmQgPSBNYXRoLmNlaWwocG9zLnkgKyBzaXplLnkpO1xyXG5cclxuICAgIGZvciAobGV0IHkgPSB5U3RhcnQ7IHkgPCB5RW5kOyB5KyspIHtcclxuICAgICAgZm9yIChsZXQgeCA9IHhTdGFydDsgeCA8IHhFbmQ7IHgrKykge1xyXG4gICAgICAgIGxldCBpc091dHNpZGUgPSB4IDwgMCB8fCB4ID49IHRoaXMud2lkdGggfHwgeSA8IDAgfHwgeSA+PSB0aGlzLmhlaWdodDtcclxuICAgICAgICBsZXQgaGVyZSA9IGlzT3V0c2lkZSA/ICd3YWxsJyA6IHRoaXMucm93c1t5XVt4XTtcclxuICAgICAgICBpZiAoaGVyZSA9PSB0eXBlKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufSIsImltcG9ydCB7IExldmVsIH0gZnJvbSBcIi4vTGV2ZWxcIjtcclxuaW1wb3J0IHsgRE9NRGlzcGxheSB9IGZyb20gXCIuL0Rpc3BsYXlzL0RPTURpc3BsYXlcIjtcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tIFwiLi9TdGF0ZVwiO1xyXG5pbXBvcnQgeyB0cmFja0tleXMgfSBmcm9tICcuL0xpc3RlbmVyJ1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBydW5BbmltYXRpb24oZnJhbWVGdW5jOiBhbnkpIHtcclxuICBsZXQgbGFzdFRpbWUgPSBudWxsO1xyXG4gIGZ1bmN0aW9uIGZyYW1lKHRpbWU6IG51bWJlcikge1xyXG4gICAgaWYgKGxhc3RUaW1lICE9PSBudWxsKSB7XHJcbiAgICAgIGxldCB0aW1lU3RlcCA9IE1hdGgubWluKHRpbWUgLSBsYXN0VGltZSwgMTAwKSAvIDEwMDA7XHJcbiAgICAgIGlmIChmcmFtZUZ1bmModGltZVN0ZXApID09PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGFzdFRpbWUgPSB0aW1lO1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcclxuICB9XHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBydW5MZXZlbChsZXZlbDogTGV2ZWwsIERpc3BsYXk6IHR5cGVvZiBET01EaXNwbGF5KSB7XHJcbiAgbGV0IGRpc3BsYXkgPSBuZXcgRGlzcGxheShkb2N1bWVudC5ib2R5LCBsZXZlbCk7XHJcbiAgbGV0IHN0YXRlID0gU3RhdGUuc3RhcnQobGV2ZWwpO1xyXG4gIGxldCBlbmRpbmcgPSAxO1xyXG4gIGxldCBydW5uaW5nOiAneWVzJyB8ICdubycgfCAncGF1c2luZycgPSAneWVzJ1xyXG4gIGNvbnN0IGFycm93S2V5cyA9IHRyYWNrS2V5cyhbJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ0Fycm93VXAnXSk7XHJcblxyXG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgIGZ1bmN0aW9uIGVzY0hhbmRsZXIoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuXHJcbiAgICAgIGlmIChldmVudC5rZXkgIT09ICdFc2NhcGUnKSByZXR1cm47XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICBpZiAocnVubmluZyA9PT0gJ25vJykge1xyXG4gICAgICAgIHJ1bm5pbmcgPSAneWVzJztcclxuICAgICAgICBydW5BbmltYXRpb24oZnJhbWUpO1xyXG5cclxuICAgICAgfSBlbHNlIGlmIChydW5uaW5nID0gJ3llcycpIHtcclxuICAgICAgICBydW5uaW5nID0gJ3BhdXNpbmcnO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBydW5uaW5nID0gJ3llcydcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlc2NIYW5kbGVyKVxyXG5cclxuICAgIGZ1bmN0aW9uIGZyYW1lKHRpbWU6IG51bWJlcikge1xyXG5cclxuICAgICAgaWYgKHJ1bm5pbmcgPT09ICdwYXVzaW5nJykge1xyXG4gICAgICAgIHJ1bm5pbmcgPSAnbm8nO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgc3RhdGUgPSBzdGF0ZS51cGRhdGUodGltZSwgYXJyb3dLZXlzKTtcclxuICAgICAgZGlzcGxheS5zeW5jU3RhdGUoc3RhdGUpO1xyXG5cclxuICAgICAgaWYgKHN0YXRlLnN0YXR1cyA9PT0gJ3BsYXlpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICB9IGVsc2UgaWYgKGVuZGluZyA+IDApIHtcclxuICAgICAgICBlbmRpbmcgLT0gdGltZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGlzcGxheS5jbGVhcigpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXNjSGFuZGxlcik7XHJcbiAgICAgICAgYXJyb3dLZXlzLnVucmVnaXN0ZXIoKTtcclxuICAgICAgICByZXNvbHZlKHN0YXRlLnN0YXR1cyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJ1bkFuaW1hdGlvbihmcmFtZSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5HYW1lKHBsYW5zOiBzdHJpbmdbXSwgRGlzcGxheTogdHlwZW9mIERPTURpc3BsYXkpIHtcclxuICBsZXQgbGl2ZXMgPSA1O1xyXG4gIGZvciAobGV0IGxldmVsID0gMDsgbGV2ZWwgPCBwbGFucy5sZW5ndGg7KSB7XHJcbiAgICBsZXQgc3RhdHVzID0gYXdhaXQgcnVuTGV2ZWwobmV3IExldmVsKHBsYW5zW2xldmVsXSksIERpc3BsYXkpO1xyXG4gICAgaWYgKHN0YXR1cyA9PT0gJ3dvbicpIGxldmVsKys7XHJcbiAgICBpZiAoc3RhdHVzID09PSAnbG9zdCcpIHtcclxuICAgICAgY29uc29sZS5sb2coYCR7LS1saXZlc30g0LbQuNC30L3QtdC5YCk7XHJcbiAgICAgIGlmIChsaXZlcyA9PT0gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfRgtGLINC/0YDQvtC40LPRgNCw0LsnKTtcclxuICAgICAgICBsZXZlbCA9IDA7XHJcbiAgICAgICAgbGl2ZXMgPSA1O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNvbnNvbGUubG9nKCfRgtGLINC/0L7QsdC10LTQuNC7IScpO1xyXG59XHJcbiIsInR5cGUgSURvd24gPSB7XHJcbiAgW2tleSBpbiAnQXJyb3dMZWZ0JyB8ICdBcnJvd1JpZ2h0JyB8ICdBcnJvd1VwJ106IGJvb2xlYW47XHJcbn0gJiB7XHJcbiAgdW5yZWdpc3RlcigpOiB2b2lkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRyYWNrS2V5cyhrZXlzOiBzdHJpbmdbXSkge1xyXG4gIGxldCBkb3duOiBJRG93biA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgZnVuY3Rpb24gdHJhY2soZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIGlmIChrZXlzLmluY2x1ZGVzKGV2ZW50LmtleSkpIHtcclxuICAgICAgZG93bltldmVudC5rZXldID0gZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nO1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRyYWNrKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0cmFjayk7XHJcblxyXG4gIGRvd24udW5yZWdpc3RlciA9ICgpID0+IHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdHJhY2spO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdHJhY2spO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRvd247XHJcbn0iLCJpbXBvcnQgeyBsZXZlbDEsIGxldmVsMiB9IGZyb20gJy4vc3JjL2xldmVscyc7XHJcbmltcG9ydCB7IHJ1bkdhbWUgfSBmcm9tIFwiLi9zcmMvcnVuRnVuY3Rpb25zXCJcclxuaW1wb3J0IHsgRE9NRGlzcGxheSB9IGZyb20gJy4vc3JjL0Rpc3BsYXlzL0RPTURpc3BsYXknO1xyXG5cclxucnVuR2FtZShbbGV2ZWwxLCBsZXZlbDJdLCBET01EaXNwbGF5KSIsImltcG9ydCB7IGVsdCB9IGZyb20gXCIuLi9oZWxwZXJzXCJcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tIFwiLi4vU3RhdGVcIjtcclxuaW1wb3J0IHsgZHJhd0FjdG9ycywgZHJhd0dyaWQgfSBmcm9tIFwiLi4vZHJhd0Z1bmN0aW9uc1wiO1xyXG5pbXBvcnQgeyBMZXZlbCB9IGZyb20gXCIuLi9MZXZlbFwiO1xyXG5pbXBvcnQgeyBzY2FsZSB9IGZyb20gXCIuLi9jb25zdHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBET01EaXNwbGF5IHtcclxuICBkb206IEhUTUxFbGVtZW50O1xyXG4gIGFjdG9yTGF5ZXI6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCwgbGV2ZWw6IExldmVsKSB7XHJcbiAgICB0aGlzLmRvbSA9IGVsdCgnZGl2JywgeyBjbGFzczogJ2dhbWUnIH0sIGRyYXdHcmlkKGxldmVsKSk7XHJcbiAgICB0aGlzLmFjdG9yTGF5ZXIgPSBudWxsO1xyXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZG9tKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkgeyB0aGlzLmRvbS5yZW1vdmUoKTsgfVxyXG5cclxuICBzeW5jU3RhdGUoc3RhdGU6IFN0YXRlKSB7XHJcbiAgICB0aGlzLmFjdG9yTGF5ZXI/LnJlbW92ZSgpXHJcbiAgICB0aGlzLmFjdG9yTGF5ZXIgPSBkcmF3QWN0b3JzKHN0YXRlLmFjdG9ycyk7XHJcbiAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLmFjdG9yTGF5ZXIpO1xyXG4gICAgdGhpcy5kb20uY2xhc3NOYW1lID0gYGdhbWUgJHtzdGF0ZS5zdGF0dXN9YDtcclxuICAgIHRoaXMuc2Nyb2xsUGxheWVySW50b1ZpZXcoc3RhdGUpO1xyXG4gIH07XHJcblxyXG4gIHNjcm9sbFBsYXllckludG9WaWV3KHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgbGV0IHdpZHRoID0gdGhpcy5kb20uY2xpZW50V2lkdGg7XHJcbiAgICBsZXQgaGVpZ2h0ID0gdGhpcy5kb20uY2xpZW50SGVpZ2h0O1xyXG4gICAgbGV0IG1hcmdpbiA9IHdpZHRoIC8gMztcclxuXHJcbiAgICBsZXQgbGVmdCA9IHRoaXMuZG9tLnNjcm9sbExlZnQ7XHJcbiAgICBsZXQgcmlnaHQgPSBsZWZ0ICsgd2lkdGg7XHJcblxyXG4gICAgbGV0IHRvcCA9IHRoaXMuZG9tLnNjcm9sbFRvcDtcclxuICAgIGxldCBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XHJcblxyXG4gICAgbGV0IHBsYXllciA9IHN0YXRlLnBsYXllcjtcclxuICAgIGxldCBjZW50ZXIgPSBwbGF5ZXIucG9zLnBsdXMocGxheWVyLnNpemUudGltZXMoMC41KSlcclxuICAgICAgLnRpbWVzKHNjYWxlKTtcclxuXHJcbiAgICBpZiAoY2VudGVyLnggPCBsZWZ0ICsgbWFyZ2luKSB7XHJcbiAgICAgIHRoaXMuZG9tLnNjcm9sbExlZnQgPSBjZW50ZXIueCAtIG1hcmdpbjtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGNlbnRlci54ID4gcmlnaHQgLSBtYXJnaW4pIHtcclxuICAgICAgdGhpcy5kb20uc2Nyb2xsTGVmdCA9IGNlbnRlci54ICsgbWFyZ2luIC0gd2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNlbnRlci55IDwgdG9wICsgbWFyZ2luKSB7XHJcbiAgICAgIHRoaXMuZG9tLnNjcm9sbFRvcCA9IGNlbnRlci55IC0gbWFyZ2luO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoY2VudGVyLnggPiBib3R0b20gLSBtYXJnaW4pIHtcclxuICAgICAgdGhpcy5kb20uc2Nyb2xsVG9wID0gY2VudGVyLnkgKyBtYXJnaW4gLSBoZWlnaHQ7XHJcbiAgICB9XHJcbiAgfTtcclxufSIsImltcG9ydCB7IElBY3RvciB9IGZyb20gJy4vdHMvaW5kZXgnO1xyXG5pbXBvcnQgeyBlbHQgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XHJcbmltcG9ydCB7IExldmVsIH0gZnJvbSBcIi4vTGV2ZWxcIjtcclxuaW1wb3J0IHsgc2NhbGUgfSBmcm9tIFwiLi9jb25zdHNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3R3JpZChsZXZlbDogTGV2ZWwpIHtcclxuICByZXR1cm4gZWx0KCd0YWJsZScsIHtcclxuICAgIGNsYXNzOiAnYmFja2dyb3VuZCcsXHJcbiAgICBzdHlsZTogYHdpZHRoOiAke2xldmVsLndpZHRoICogc2NhbGV9cHhgXHJcbiAgfSwgLi4ubGV2ZWwucm93cy5tYXAocm93ID0+IGVsdCgndHInLCB7IHN0eWxlOiBgaGVpZ2h0OiAke3NjYWxlfXB4YCB9LFxyXG4gICAgLi4ucm93Lm1hcCh0eXBlID0+IGVsdCgndGQnLCB7IGNsYXNzOiB0eXBlIH0pKSkpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0FjdG9ycyhhY3RvcnM6IElBY3RvcltdKSB7XHJcbiAgcmV0dXJuIGVsdCgnZGl2Jywge30sIC4uLmFjdG9ycy5tYXAoYWN0b3IgPT4ge1xyXG4gICAgbGV0IHJlY3QgPSBlbHQoJ2RpdicsIHsgY2xhc3M6IGBhY3RvciAke2FjdG9yLnR5cGV9YCB9KTtcclxuICAgIHJlY3Quc3R5bGUud2lkdGggPSBgJHthY3Rvci5zaXplLnggKiBzY2FsZX1weGBcclxuICAgIHJlY3Quc3R5bGUuaGVpZ2h0ID0gYCR7YWN0b3Iuc2l6ZS55ICogc2NhbGV9cHhgXHJcbiAgICByZWN0LnN0eWxlLmxlZnQgPSBgJHthY3Rvci5wb3MueCAqIHNjYWxlfXB4YFxyXG4gICAgcmVjdC5zdHlsZS50b3AgPSBgJHthY3Rvci5wb3MueSAqIHNjYWxlfXB4YFxyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbiAgfSkpO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=