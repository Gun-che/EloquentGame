!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.plus=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.times=function(e){return new t(this.x*e,this.y*e)},t}(),o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(t,e){for(var n,r,i,s,u=[],l=2;l<arguments.length;l++)u[l-2]=arguments[l];var a=document.createElement(t);try{for(var c=o(Object.keys(e)),f=c.next();!f.done;f=c.next()){var p=f.value;a.setAttribute(p,e[p])}}catch(t){n={error:t}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}try{for(var h=o(u),y=h.next();!y.done;y=h.next()){var d=y.value;a.appendChild(d)}}catch(t){i={error:t}}finally{try{y&&!y.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return a}var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=function(){function t(t,e,n){this.level=t,this.actors=e,this.status=n}return t.start=function(e){return new t(e,e.startActors,"playing")},Object.defineProperty(t.prototype,"player",{get:function(){return this.actors.find((function(t){return"player"===t.type}))},enumerable:!1,configurable:!0}),t.prototype.update=function(e,n){var r,o,i=this,u=this.actors.map((function(t){return t.update(e,i,n)})),l=new t(this.level,u,this.status);if("playing"!==l.status)return l;var a,c,f=l.player;if(this.level.touches(f.pos,f.size,"lava"))return new t(this.level,u,"lost");try{for(var p=s(u),h=p.next();!h.done;h=p.next()){var y=h.value;y!==f&&(c=f,(a=y).pos.x+a.size.x>c.pos.x&&a.pos.x<c.pos.x+c.size.x&&a.pos.y+a.size.y>c.pos.y&&a.pos.y<c.pos.y+c.size.y)&&(l=y.collide(l))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return l},t}(),l=function(){function t(t,e,n){this.pos=t,this.basePos=e,this.wobble=n,this.size=new r(.6,.6)}return Object.defineProperty(t.prototype,"type",{get:function(){return"coin"},enumerable:!1,configurable:!0}),t.create=function(e){var n=e.plus(new r(.2,.1));return new t(n,n,Math.random()*Math.PI*2)},t.prototype.collide=function(t){var e=this,n=t.actors.filter((function(t){return t!==e})),r=t.status;return n.some((function(t){return"coin"===t.type}))||(r="won"),new u(t.level,n,r)},t.prototype.update=function(e){var n=this.wobble+e*f,o=Math.sin(n)*p;return new t(this.basePos.plus(new r(0,o)),this.basePos,n)},t}(),a=function(){function t(t,e,n){this.speed=e,this.pos=t,this.reset=n,this.size=new r(1,1)}return Object.defineProperty(t.prototype,"type",{get:function(){return"lava"},enumerable:!1,configurable:!0}),t.create=function(e,n){switch(n){case"=":return new t(e,new r(2,0));case"|":return new t(e,new r(0,2));case"v":return new t(e,new r(0,3),e)}},t.prototype.collide=function(t){return new u(t.level,t.actors,"lost")},t.prototype.update=function(e,n){var r=this.pos.plus(this.speed.times(e));return n.level.touches(r,this.size,"wall")?this.reset?new t(this.reset,this.speed,this.reset):new t(this.pos,this.speed.times(-1)):new t(r,this.speed,this.reset)},t}(),c={".":"empty","#":"wall","+":"lava","@":function(){function t(t,e){this.pos=t,this.speed=e,this.size=new r(.8,1.5)}return Object.defineProperty(t.prototype,"type",{get:function(){return"player"},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e.plus(new r(0,-.5)),new r(0,0))},t.prototype.update=function(e,n,o){var i=0;o.ArrowLeft&&(i-=h),o.ArrowRight&&(i+=h);var s=this.pos,u=s.plus(new r(i*e,0));n.level.touches(u,this.size,"wall")||(s=u);var l=this.speed.y+e*y,a=s.plus(new r(0,l*e));return n.level.touches(a,this.size,"wall")?l=o.ArrowUp&&l>0?-d:0:s=a,new t(s,new r(i,l))},t}(),o:l,"=":a,v:a,"|":a},f=8,p=.07,h=7,y=30,d=17,v=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},w=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t},b=function(){function t(t){var e=this,n=t.trim().split("\n").map((function(t){return w(t)}));this.height=n.length,this.width=n[0].length,this.startActors=[],this.rows=n.map((function(t,n){return t.map((function(t,o){var i=c[t];return"string"==typeof i?i:(e.startActors.push(i.create(new r(o,n),t)),"empty")}))}))}return t.prototype.touches=function(t,e,n){for(var r=Math.floor(t.x),o=Math.ceil(t.x+e.x),i=Math.floor(t.y),s=Math.ceil(t.y+e.y),u=i;u<s;u++)for(var l=r;l<o;l++){if((l<0||l>=this.width||u<0||u>=this.height?"wall":this.rows[u][l])==n)return!0}return!1},t}();var m=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{l(r.next(t))}catch(t){i(t)}}function u(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}l((r=r.apply(t,e||[])).next())}))},x=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},g=function(t){var e=Object.create(null);function n(n){t.includes(n.key)&&(e[n.key]="keydown"===n.type,n.preventDefault())}return window.addEventListener("keydown",n),window.addEventListener("keyup",n),e}(["ArrowLeft","ArrowRight","ArrowUp"]);function S(t,e){var n=new e(document.body,t),r=u.start(t),o=1;return new Promise((function(t){var e,i;e=function(e){return r=r.update(e,g),n.syncState(r),"playing"===r.status||(o>0?(o-=e,!0):(n.clear(),t(r.status),!1))},i=null,requestAnimationFrame((function t(n){if(null!==i){var r=Math.min(n-i,100)/1e3;if(!1===e(r))return}i=n,requestAnimationFrame(t)}))}))}var P=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},j=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P(arguments[e]));return t};!function(t,e){m(this,void 0,void 0,(function(){var n,r,o;return x(this,(function(i){switch(i.label){case 0:n=5,r=0,i.label=1;case 1:return r<t.length?[4,S(new b(t[r]),e)]:[3,4];case 2:"won"===(o=i.sent())&&r++,"lost"===o&&(console.log(--n+" жизней"),0===n&&(console.log("ты проиграл"),r=0,n=5)),i.label=3;case 3:return[3,1];case 4:return console.log("ты победил!"),[2]}}))}))}(["\n......................\n..#................#..\n..#................#..\n..#.........o.o....#..\n..#.@......#####...#..\n..#####............#..\n......#++++++++++++#..\n......##############..\n......................","\n.....................................................................................################.................................................v\n......................................................................................###.v.....v......................................................\n........................................................................................v..............................................................\n.......................................................................................................................................................\n#...............................................................................................................oo....................................o\n###..................................o........................................................................................o..o....................#\n##..............................o....#.....o......................................................=.....o.o.o.........................o....o.........##\n##..............................#....#.....#............................................................#####.........ooooooo.........##...##........##\n##..............................#++++++++++#........................................o..o..o.........o................########....##..................##\n##.............................#############................................o.......########.......##...............................................###\n##.............................................................oo.........#####.....................................................................###\n##@...............######......................................####.....................|......oooo.................................................####\n###............o........................=...................................................#..#...............=.................................######\n#################+++++++#####################################################################+++++#####################################################\n#######################################################################################################################################################\n"],function(){function t(t,e){this.dom=i("div",{class:"game"},function(t){return i.apply(void 0,j(["table",{class:"background",style:"width: "+20*t.width+"px"}],t.rows.map((function(t){return i.apply(void 0,j(["tr",{style:"height: 20px"}],t.map((function(t){return i("td",{class:t})}))))}))))}(e)),this.actorLayer=null,t.appendChild(this.dom)}return t.prototype.clear=function(){this.dom.remove()},t.prototype.syncState=function(t){var e,n;null===(e=this.actorLayer)||void 0===e||e.remove(),this.actorLayer=(n=t.actors,i.apply(void 0,j(["div",{}],n.map((function(t){var e=i("div",{class:"actor "+t.type});return e.style.width=20*t.size.x+"px",e.style.height=20*t.size.y+"px",e.style.left=20*t.pos.x+"px",e.style.top=20*t.pos.y+"px",e}))))),this.dom.appendChild(this.actorLayer),this.dom.className="game "+t.status,this.scrollPlayerIntoView(t)},t.prototype.scrollPlayerIntoView=function(t){var e=this.dom.clientWidth,n=this.dom.clientHeight,r=e/3,o=this.dom.scrollLeft,i=o+e,s=this.dom.scrollTop,u=s+n,l=t.player,a=l.pos.plus(l.size.times(.5)).times(20);a.x<o+r?this.dom.scrollLeft=a.x-r:a.x>i-r&&(this.dom.scrollLeft=a.x+r-e),a.y<s+r?this.dom.scrollTop=a.y-r:a.x>u-r&&(this.dom.scrollTop=a.y+r-n)},t}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xldmVscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVmVjLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9TdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0b3JzL0NvaW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdG9ycy9MYXZhLnRzIiwid2VicGFjazovLy8uL3NyYy9jb25zdHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdG9ycy9QbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xldmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9ydW5GdW5jdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpc3RlbmVyLnRzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9EaXNwbGF5cy9ET01EaXNwbGF5LnRzIiwid2VicGFjazovLy8uL3NyYy9kcmF3RnVuY3Rpb25zLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwieCIsInkiLCJ0aGlzIiwicGx1cyIsIm90aGVyIiwiVmVjIiwidGltZXMiLCJmYWN0b3IiLCJlbHQiLCJhdHRycyIsImRvbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImtleXMiLCJhdHRyIiwic2V0QXR0cmlidXRlIiwiY2hpbGRyZW4iLCJjaGlsZCIsImFwcGVuZENoaWxkIiwibGV2ZWwiLCJhY3RvcnMiLCJzdGF0dXMiLCJzdGFydCIsIlN0YXRlIiwic3RhcnRBY3RvcnMiLCJmaW5kIiwiYSIsInR5cGUiLCJ1cGRhdGUiLCJ0aW1lIiwibWFwIiwiYWN0b3IiLCJuZXdTdGF0ZSIsImFjdG9yMSIsImFjdG9yMiIsInBsYXllciIsInRvdWNoZXMiLCJwb3MiLCJzaXplIiwiY29sbGlkZSIsImJhc2VQb3MiLCJ3b2JibGUiLCJDb2luIiwiTWF0aCIsInJhbmRvbSIsIlBJIiwic3RhdGUiLCJmaWx0cmVkIiwiZmlsdGVyIiwic29tZSIsIndvYmJsZVNwZWVkIiwid29iYmxlUG9zIiwic2luIiwid29iYmxlRGlzdCIsInNwZWVkIiwicmVzZXQiLCJjaCIsIkxhdmEiLCJuZXdQb3MiLCJsZXZlbENoYXJzIiwiUGxheWVyIiwieFNwZWVkIiwiQXJyb3dMZWZ0IiwicGxheWVyWFNwZWVkIiwiQXJyb3dSaWdodCIsIm1vdmVkWCIsInlTcGVlZCIsImdyYXZpdHkiLCJtb3ZlZFkiLCJBcnJvd1VwIiwianVtcFNwZWVkIiwicGxhbiIsInJvd3MiLCJ0cmltIiwic3BsaXQiLCJoZWlnaHQiLCJsZW5ndGgiLCJ3aWR0aCIsInJvdyIsInB1c2giLCJ4U3RhcnQiLCJmbG9vciIsInhFbmQiLCJjZWlsIiwieVN0YXJ0IiwieUVuZCIsImFycm93S2V5cyIsImRvd24iLCJ0cmFjayIsImV2ZW50IiwiaW5jbHVkZXMiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0cmFja0tleXMiLCJydW5MZXZlbCIsIkRpc3BsYXkiLCJkaXNwbGF5IiwiYm9keSIsImVuZGluZyIsIlByb21pc2UiLCJyZXNvbHZlIiwiZnJhbWVGdW5jIiwibGFzdFRpbWUiLCJzeW5jU3RhdGUiLCJjbGVhciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImZyYW1lIiwidGltZVN0ZXAiLCJtaW4iLCJwbGFucyIsImxpZmVzIiwiY29uc29sZSIsImxvZyIsInJ1bkdhbWUiLCJwYXJlbnQiLCJjbGFzcyIsInN0eWxlIiwiZHJhd0dyaWQiLCJhY3RvckxheWVyIiwicmVtb3ZlIiwicmVjdCIsImxlZnQiLCJ0b3AiLCJjbGFzc05hbWUiLCJzY3JvbGxQbGF5ZXJJbnRvVmlldyIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwibWFyZ2luIiwic2Nyb2xsTGVmdCIsInJpZ2h0Iiwic2Nyb2xsVG9wIiwiYm90dG9tIiwiY2VudGVyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixF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LElBQUkrQixFQUFRM0UsS0FBS1EsSUFBSW9ILFlBQ2pCbkQsRUFBU3pFLEtBQUtRLElBQUlxSCxhQUNsQkMsRUFBU25ELEVBQVEsRUFFakI2QyxFQUFPeEgsS0FBS1EsSUFBSXVILFdBQ2hCQyxFQUFRUixFQUFPN0MsRUFFZjhDLEVBQU16SCxLQUFLUSxJQUFJeUgsVUFDZkMsRUFBU1QsRUFBTWhELEVBRWZ4QyxFQUFTVyxFQUFNWCxPQUNma0csRUFBU2xHLEVBQU9FLElBQUlsQyxLQUFLZ0MsRUFBT0csS0FBS2hDLE1BQU0sS0FDNUNBLE1OZGMsSU1nQmIrSCxFQUFPckksRUFBSTBILEVBQU9NLEVBQ3BCOUgsS0FBS1EsSUFBSXVILFdBQWFJLEVBQU9ySSxFQUFJZ0ksRUFFeEJLLEVBQU9ySSxFQUFJa0ksRUFBUUYsSUFDNUI5SCxLQUFLUSxJQUFJdUgsV0FBYUksRUFBT3JJLEVBQUlnSSxFQUFTbkQsR0FHeEN3RCxFQUFPcEksRUFBSTBILEVBQU1LLEVBQ25COUgsS0FBS1EsSUFBSXlILFVBQVlFLEVBQU9wSSxFQUFJK0gsRUFFdkJLLEVBQU9ySSxFQUFJb0ksRUFBU0osSUFDN0I5SCxLQUFLUSxJQUFJeUgsVUFBWUUsRUFBT3BJLEVBQUkrSCxFQUFTckQsSUFHL0MsRUFqREEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNvbnN0IGxldmVsMSA9IGBcclxuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxyXG4uLiMuLi4uLi4uLi4uLi4uLi4uIy4uXHJcbi4uIy4uLi4uLi4uLi4uLi4uLi4jLi5cclxuLi4jLi4uLi4uLi4uby5vLi4uLiMuLlxyXG4uLiMuQC4uLi4uLiMjIyMjLi4uIy4uXHJcbi4uIyMjIyMuLi4uLi4uLi4uLi4jLi5cclxuLi4uLi4uIysrKysrKysrKysrKyMuLlxyXG4uLi4uLi4jIyMjIyMjIyMjIyMjIy4uXHJcbi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5gXHJcblxyXG5leHBvcnQgY29uc3QgbGV2ZWwyID0gYFxyXG4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjIyMjIyMjIyMjIyMjIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi52XHJcbi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjLnYuLi4uLnYuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cclxuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLnYuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxyXG4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXHJcbiMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5vby4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLm9cclxuIyMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLm8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uby4uby4uLi4uLi4uLi4uLi4uLi4uLi4uI1xyXG4jIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLm8uLi4uIy4uLi4uby4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLj0uLi4uLm8uby5vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLm8uLi4uby4uLi4uLi4uLiMjXHJcbiMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIy4uLi4jLi4uLi4jLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjIyMuLi4uLi4uLi5vb29vb29vLi4uLi4uLi4uIyMuLi4jIy4uLi4uLi4uIyNcclxuIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jKysrKysrKysrKyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uby4uby4uby4uLi4uLi4uLm8uLi4uLi4uLi4uLi4uLi4uIyMjIyMjIyMuLi4uIyMuLi4uLi4uLi4uLi4uLi4uLi4jI1xyXG4jIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjIyMjIyMjIyMjIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uby4uLi4uLi4jIyMjIyMjIy4uLi4uLi4jIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjXHJcbiMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLm9vLi4uLi4uLi4uIyMjIyMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyNcclxuIyNALi4uLi4uLi4uLi4uLi4uIyMjIyMjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4jIyMjLi4uLi4uLi4uLi4uLi4uLi4uLi4ufC4uLi4uLm9vb28uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjI1xyXG4jIyMuLi4uLi4uLi4uLi5vLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uPS4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiMuLiMuLi4uLi4uLi4uLi4uLi49Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIyMjIyMjXHJcbiMjIyMjIyMjIyMjIyMjIyMjKysrKysrKyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIysrKysrIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5gIiwiXHJcbmV4cG9ydCBjbGFzcyBWZWMge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICB9XHJcblxyXG4gIHBsdXMob3RoZXI6IFZlYykge1xyXG4gICAgcmV0dXJuIG5ldyBWZWModGhpcy54ICsgb3RoZXIueCwgdGhpcy55ICsgb3RoZXIueSlcclxuICB9XHJcblxyXG4gIHRpbWVzKGZhY3RvcjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gbmV3IFZlYyh0aGlzLnggKiBmYWN0b3IsIHRoaXMueSAqIGZhY3RvcilcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IElBY3RvciB9IGZyb20gJy4vdHMvaW5kZXgnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb3ZlcmxhcChhY3RvcjE6IElBY3RvciwgYWN0b3IyOiBJQWN0b3IpIHtcclxuICByZXR1cm4gYWN0b3IxLnBvcy54ICsgYWN0b3IxLnNpemUueCA+IGFjdG9yMi5wb3MueCAmJlxyXG4gICAgYWN0b3IxLnBvcy54IDwgYWN0b3IyLnBvcy54ICsgYWN0b3IyLnNpemUueCAmJlxyXG4gICAgYWN0b3IxLnBvcy55ICsgYWN0b3IxLnNpemUueSA+IGFjdG9yMi5wb3MueSAmJlxyXG4gICAgYWN0b3IxLnBvcy55IDwgYWN0b3IyLnBvcy55ICsgYWN0b3IyLnNpemUueTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVsdChuYW1lOiBzdHJpbmcsIGF0dHJzOiBhbnksIC4uLmNoaWxkcmVuOiBIVE1MRWxlbWVudFtdKTogSFRNTEVsZW1lbnQge1xyXG4gIGxldCBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xyXG5cclxuICBmb3IgKGxldCBhdHRyIG9mIE9iamVjdC5rZXlzKGF0dHJzKSkge1xyXG4gICAgZG9tLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XHJcbiAgfVxyXG5cclxuICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG4gICAgZG9tLmFwcGVuZENoaWxkKGNoaWxkKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkb207XHJcbn0iLCJpbXBvcnQgeyBMZXZlbCB9IGZyb20gJy4vTGV2ZWwnXHJcbmltcG9ydCB7IG92ZXJsYXAgfSBmcm9tICcuL2hlbHBlcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXRlIHtcclxuICBsZXZlbDogTGV2ZWw7XHJcbiAgYWN0b3JzOiBhbnk7XHJcbiAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgc3RhcnQ6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IobGV2ZWw6IExldmVsLCBhY3RvcnM6IGFueSwgc3RhdHVzOiBzdHJpbmcpIHtcclxuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICAgIHRoaXMuYWN0b3JzID0gYWN0b3JzO1xyXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc3RhcnQobGV2ZWw6IExldmVsKSB7XHJcbiAgICByZXR1cm4gbmV3IFN0YXRlKGxldmVsLCBsZXZlbC5zdGFydEFjdG9ycywgJ3BsYXlpbmcnKTtcclxuICB9XHJcblxyXG4gIGdldCBwbGF5ZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3RvcnMuZmluZChhID0+IGEudHlwZSA9PT0gJ3BsYXllcicpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKHRpbWU6IG51bWJlciwga2V5czogYW55KSB7XHJcbiAgICBsZXQgYWN0b3JzID0gdGhpcy5hY3RvcnNcclxuICAgICAgLm1hcChhY3RvciA9PiBhY3Rvci51cGRhdGUodGltZSwgdGhpcywga2V5cykpO1xyXG4gICAgbGV0IG5ld1N0YXRlID0gbmV3IFN0YXRlKHRoaXMubGV2ZWwsIGFjdG9ycywgdGhpcy5zdGF0dXMpO1xyXG5cclxuICAgIGlmIChuZXdTdGF0ZS5zdGF0dXMgIT09ICdwbGF5aW5nJykgcmV0dXJuIG5ld1N0YXRlO1xyXG5cclxuICAgIGxldCBwbGF5ZXIgPSBuZXdTdGF0ZS5wbGF5ZXI7XHJcbiAgICBpZiAodGhpcy5sZXZlbC50b3VjaGVzKHBsYXllci5wb3MsIHBsYXllci5zaXplLCAnbGF2YScpKSB7XHJcbiAgICAgIHJldHVybiBuZXcgU3RhdGUodGhpcy5sZXZlbCwgYWN0b3JzLCAnbG9zdCcpXHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgYWN0b3Igb2YgYWN0b3JzKSB7XHJcbiAgICAgIGlmIChhY3RvciAhPT0gcGxheWVyICYmIG92ZXJsYXAoYWN0b3IsIHBsYXllcikpIHtcclxuICAgICAgICBuZXdTdGF0ZSA9IGFjdG9yLmNvbGxpZGUobmV3U3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3U3RhdGU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgd29iYmxlRGlzdCwgd29iYmxlU3BlZWQgfSBmcm9tICcuLy4uL2NvbnN0cyc7XHJcbmltcG9ydCB7IFZlYyB9IGZyb20gJy4uL1ZlYydcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9TdGF0ZSdcclxuXHJcbmV4cG9ydCBjbGFzcyBDb2luIHtcclxuICBwb3M6IFZlYztcclxuICBiYXNlUG9zOiBWZWM7XHJcbiAgd29iYmxlOiBudW1iZXI7XHJcbiAgc2l6ZTogVmVjO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwb3M6IFZlYywgYmFzZVBvczogVmVjLCB3b2JibGU6IG51bWJlcikge1xyXG4gICAgdGhpcy5wb3MgPSBwb3M7XHJcbiAgICB0aGlzLmJhc2VQb3MgPSBiYXNlUG9zO1xyXG4gICAgdGhpcy53b2JibGUgPSB3b2JibGU7XHJcbiAgICB0aGlzLnNpemUgPSBuZXcgVmVjKDAuNiwgMC42KTtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKCkge1xyXG4gICAgcmV0dXJuICdjb2luJztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGUocG9zOiBWZWMpIHtcclxuICAgIGxldCBiYXNlUG9zID0gcG9zLnBsdXMobmV3IFZlYygwLjIsIDAuMSkpO1xyXG4gICAgcmV0dXJuIG5ldyBDb2luKGJhc2VQb3MsIGJhc2VQb3MsIE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMilcclxuICB9XHJcblxyXG4gIGNvbGxpZGUoc3RhdGU6IFN0YXRlKTogU3RhdGUge1xyXG4gICAgbGV0IGZpbHRyZWQgPSBzdGF0ZS5hY3RvcnMuZmlsdGVyKGEgPT4gYSAhPT0gdGhpcyk7XHJcbiAgICBsZXQgc3RhdHVzID0gc3RhdGUuc3RhdHVzO1xyXG5cclxuICAgIGlmICghZmlsdHJlZC5zb21lKGEgPT4gYS50eXBlID09PSAnY29pbicpKSB7XHJcbiAgICAgIHN0YXR1cyA9ICd3b24nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBTdGF0ZShzdGF0ZS5sZXZlbCwgZmlsdHJlZCwgc3RhdHVzKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSh0aW1lOiBudW1iZXIpIHtcclxuICAgIGxldCB3b2JibGUgPSB0aGlzLndvYmJsZSArIHRpbWUgKiB3b2JibGVTcGVlZDtcclxuICAgIGxldCB3b2JibGVQb3MgPSBNYXRoLnNpbih3b2JibGUpICogd29iYmxlRGlzdDtcclxuXHJcbiAgICByZXR1cm4gbmV3IENvaW4odGhpcy5iYXNlUG9zLnBsdXMobmV3IFZlYygwLCB3b2JibGVQb3MpKSwgdGhpcy5iYXNlUG9zLCB3b2JibGUpO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjIH0gZnJvbSAnLi4vVmVjJ1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL1N0YXRlJ1xyXG5pbXBvcnQgeyBJTGF2YUNoIH0gZnJvbSAnLi4vdHMnXHJcblxyXG5leHBvcnQgY2xhc3MgTGF2YSB7XHJcbiAgcG9zOiBWZWM7XHJcbiAgc3BlZWQ6IFZlYztcclxuICByZXNldD86IFZlYztcclxuICBzaXplOiBWZWM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvczogVmVjLCBzcGVlZDogVmVjLCByZXNldD86IFZlYykge1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5wb3MgPSBwb3M7XHJcbiAgICB0aGlzLnJlc2V0ID0gcmVzZXQ7XHJcbiAgICB0aGlzLnNpemUgPSBuZXcgVmVjKDEsIDEpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKSB7XHJcbiAgICByZXR1cm4gJ2xhdmEnO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZShwb3M6IFZlYywgY2g6IElMYXZhQ2gpIHtcclxuICAgIHN3aXRjaCAoY2gpIHtcclxuICAgICAgY2FzZSAnPSc6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMYXZhKHBvcywgbmV3IFZlYygyLCAwKSk7XHJcbiAgICAgIGNhc2UgJ3wnOlxyXG4gICAgICAgIHJldHVybiBuZXcgTGF2YShwb3MsIG5ldyBWZWMoMCwgMikpO1xyXG4gICAgICBjYXNlICd2JzpcclxuICAgICAgICByZXR1cm4gbmV3IExhdmEocG9zLCBuZXcgVmVjKDAsIDMpLCBwb3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29sbGlkZShzdGF0ZTogU3RhdGUpOiBTdGF0ZSB7XHJcbiAgICByZXR1cm4gbmV3IFN0YXRlKHN0YXRlLmxldmVsLCBzdGF0ZS5hY3RvcnMsICdsb3N0Jyk7XHJcbiAgfTtcclxuXHJcbiAgdXBkYXRlKHRpbWU6IG51bWJlciwgc3RhdGU6IFN0YXRlKTogTGF2YSB7XHJcbiAgICBsZXQgbmV3UG9zID0gdGhpcy5wb3MucGx1cyh0aGlzLnNwZWVkLnRpbWVzKHRpbWUpKTtcclxuICAgIGlmICghc3RhdGUubGV2ZWwudG91Y2hlcyhuZXdQb3MsIHRoaXMuc2l6ZSwgJ3dhbGwnKSkge1xyXG4gICAgICByZXR1cm4gbmV3IExhdmEobmV3UG9zLCB0aGlzLnNwZWVkLCB0aGlzLnJlc2V0KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucmVzZXQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBMYXZhKHRoaXMucmVzZXQsIHRoaXMuc3BlZWQsIHRoaXMucmVzZXQpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBuZXcgTGF2YSh0aGlzLnBvcywgdGhpcy5zcGVlZC50aW1lcygtMSkpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDb2luIH0gZnJvbSAnLi9hY3RvcnMvQ29pbidcclxuaW1wb3J0IHsgTGF2YSB9IGZyb20gJy4vYWN0b3JzL0xhdmEnXHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJy4vYWN0b3JzL1BsYXllcidcclxuXHJcbmV4cG9ydCBjb25zdCBsZXZlbENoYXJzOiB7XHJcbiAgJy4nOiAnZW1wdHknLFxyXG4gICcjJzogJ3dhbGwnLFxyXG4gICcrJzogJ2xhdmEnLFxyXG4gICdAJzogdHlwZW9mIFBsYXllcixcclxuICAnbyc6IHR5cGVvZiBDb2luLFxyXG4gICc9JzogdHlwZW9mIExhdmEsXHJcbiAgJ3YnOiB0eXBlb2YgTGF2YSxcclxuICAnfCc6IHR5cGVvZiBMYXZhLFxyXG59ID0ge1xyXG4gICcuJzogJ2VtcHR5JyxcclxuICAnIyc6ICd3YWxsJyxcclxuICAnKyc6ICdsYXZhJyxcclxuICAnQCc6IFBsYXllcixcclxuICAnbyc6IENvaW4sXHJcbiAgJz0nOiBMYXZhLFxyXG4gICd2JzogTGF2YSxcclxuICAnfCc6IExhdmEsXHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3Qgc2NhbGUgPSAyMDtcclxuXHJcbmV4cG9ydCBjb25zdCB3b2JibGVTcGVlZCA9IDg7XHJcblxyXG5leHBvcnQgY29uc3Qgd29iYmxlRGlzdCA9IDAuMDc7XHJcblxyXG5leHBvcnQgY29uc3QgcGxheWVyWFNwZWVkID0gNztcclxuXHJcbmV4cG9ydCBjb25zdCBncmF2aXR5ID0gMzA7XHJcblxyXG5leHBvcnQgY29uc3QganVtcFNwZWVkID0gMTc7IiwiaW1wb3J0IHsgZ3Jhdml0eSwganVtcFNwZWVkIH0gZnJvbSAnLi8uLi9jb25zdHMnO1xyXG5pbXBvcnQgeyBWZWMgfSBmcm9tICcuLi9WZWMnXHJcbmltcG9ydCB7IHBsYXllclhTcGVlZCB9IGZyb20gJy4uL2NvbnN0cyc7XHJcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vU3RhdGUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXllciB7XHJcbiAgcG9zOiBWZWM7XHJcbiAgc3BlZWQ6IFZlYztcclxuICBzaXplOiBWZWM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvczogVmVjLCBzcGVlZDogVmVjKSB7XHJcbiAgICB0aGlzLnBvcyA9IHBvcztcclxuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWMoMC44LCAxLjUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKSB7IHJldHVybiAncGxheWVyJyB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGUocG9zOiBWZWMpIHtcclxuICAgIHJldHVybiBuZXcgUGxheWVyKHBvcy5wbHVzKG5ldyBWZWMoMCwgLTAuNSkpLFxyXG4gICAgICBuZXcgVmVjKDAsIDApKVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlKHRpbWU6IG51bWJlciwgc3RhdGU6IFN0YXRlLCBrZXlzOiBhbnkpOiBQbGF5ZXIge1xyXG4gICAgbGV0IHhTcGVlZCA9IDA7XHJcbiAgICBpZiAoa2V5cy5BcnJvd0xlZnQpIHtcclxuICAgICAgeFNwZWVkIC09IHBsYXllclhTcGVlZDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoa2V5cy5BcnJvd1JpZ2h0KSB7XHJcbiAgICAgIHhTcGVlZCArPSBwbGF5ZXJYU3BlZWQ7XHJcbiAgICB9XHJcbiAgICBsZXQgcG9zID0gdGhpcy5wb3M7XHJcbiAgICBsZXQgbW92ZWRYID0gcG9zLnBsdXMobmV3IFZlYyh4U3BlZWQgKiB0aW1lLCAwKSk7XHJcblxyXG4gICAgaWYgKCFzdGF0ZS5sZXZlbC50b3VjaGVzKG1vdmVkWCwgdGhpcy5zaXplLCAnd2FsbCcpKSB7XHJcbiAgICAgIHBvcyA9IG1vdmVkWDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgeVNwZWVkID0gdGhpcy5zcGVlZC55ICsgdGltZSAqIGdyYXZpdHk7XHJcbiAgICBsZXQgbW92ZWRZID0gcG9zLnBsdXMobmV3IFZlYygwLCB5U3BlZWQgKiB0aW1lKSk7XHJcblxyXG4gICAgaWYgKCFzdGF0ZS5sZXZlbC50b3VjaGVzKG1vdmVkWSwgdGhpcy5zaXplLCAnd2FsbCcpKSB7XHJcbiAgICAgIHBvcyA9IG1vdmVkWTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGtleXMuQXJyb3dVcCAmJiB5U3BlZWQgPiAwKSB7XHJcbiAgICAgIHlTcGVlZCA9IC1qdW1wU3BlZWQ7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgeVNwZWVkID0gMDtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUGxheWVyKHBvcywgbmV3IFZlYyh4U3BlZWQsIHlTcGVlZCkpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFZlYyB9IGZyb20gJy4vVmVjJ1xyXG5pbXBvcnQgeyBsZXZlbENoYXJzIH0gZnJvbSAnLi9jb25zdHMnXHJcbmltcG9ydCB7IFBMQywgSUFjdG9yIH0gZnJvbSAnLi90cydcclxuXHJcbmV4cG9ydCBjbGFzcyBMZXZlbCB7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBzdGFydEFjdG9yczogUExDW107XHJcbiAgcm93czogc3RyaW5nW11bXTtcclxuXHJcbiAgY29uc3RydWN0b3IocGxhbjogc3RyaW5nKSB7XHJcbiAgICBsZXQgcm93cyA9IHBsYW4udHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAobCA9PiBbLi4ubF0pO1xyXG4gICAgdGhpcy5oZWlnaHQgPSByb3dzLmxlbmd0aDtcclxuICAgIHRoaXMud2lkdGggPSByb3dzWzBdLmxlbmd0aDtcclxuICAgIHRoaXMuc3RhcnRBY3RvcnMgPSBbXTtcclxuXHJcbiAgICB0aGlzLnJvd3MgPSByb3dzLm1hcCgocm93OiBzdHJpbmdbXSwgeTogbnVtYmVyKSA9PiB7XHJcbiAgICAgIHJldHVybiByb3cubWFwKChjaDogc3RyaW5nLCB4OiBudW1iZXIpID0+IHtcclxuICAgICAgICBsZXQgdHlwZTogYW55ID0gbGV2ZWxDaGFyc1tjaF07XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09ICdzdHJpbmcnKSB7IHJldHVybiB0eXBlOyB9XHJcbiAgICAgICAgdGhpcy5zdGFydEFjdG9ycy5wdXNoKFxyXG4gICAgICAgICAgKHR5cGUgYXMgSUFjdG9yKS5jcmVhdGUobmV3IFZlYyh4LCB5KSwgY2gpXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gJ2VtcHR5JztcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgdG91Y2hlcyhwb3M6IFZlYywgc2l6ZTogVmVjLCB0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGxldCB4U3RhcnQgPSBNYXRoLmZsb29yKHBvcy54KTtcclxuICAgIGxldCB4RW5kID0gTWF0aC5jZWlsKHBvcy54ICsgc2l6ZS54KTtcclxuICAgIGxldCB5U3RhcnQgPSBNYXRoLmZsb29yKHBvcy55KTtcclxuICAgIGxldCB5RW5kID0gTWF0aC5jZWlsKHBvcy55ICsgc2l6ZS55KTtcclxuXHJcbiAgICBmb3IgKGxldCB5ID0geVN0YXJ0OyB5IDwgeUVuZDsgeSsrKSB7XHJcbiAgICAgIGZvciAobGV0IHggPSB4U3RhcnQ7IHggPCB4RW5kOyB4KyspIHtcclxuICAgICAgICBsZXQgaXNPdXRzaWRlID0geCA8IDAgfHwgeCA+PSB0aGlzLndpZHRoIHx8IHkgPCAwIHx8IHkgPj0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgbGV0IGhlcmUgPSBpc091dHNpZGUgPyAnd2FsbCcgOiB0aGlzLnJvd3NbeV1beF07XHJcbiAgICAgICAgaWYgKGhlcmUgPT0gdHlwZSkgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBMZXZlbCB9IGZyb20gXCIuL0xldmVsXCI7XHJcbmltcG9ydCB7IERPTURpc3BsYXkgfSBmcm9tIFwiLi9EaXNwbGF5cy9ET01EaXNwbGF5XCI7XHJcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSBcIi4vU3RhdGVcIjtcclxuaW1wb3J0IHsgdHJhY2tLZXlzIH0gZnJvbSAnLi9MaXN0ZW5lcidcclxuXHJcbmNvbnN0IGFycm93S2V5cyA9IHRyYWNrS2V5cyhbJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ0Fycm93VXAnXSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcnVuQW5pbWF0aW9uKGZyYW1lRnVuYzogYW55KSB7XHJcbiAgbGV0IGxhc3RUaW1lID0gbnVsbDtcclxuICBmdW5jdGlvbiBmcmFtZSh0aW1lOiBudW1iZXIpIHtcclxuICAgIGlmIChsYXN0VGltZSAhPT0gbnVsbCkge1xyXG4gICAgICBsZXQgdGltZVN0ZXAgPSBNYXRoLm1pbih0aW1lIC0gbGFzdFRpbWUsIDEwMCkgLyAxMDAwO1xyXG4gICAgICBpZiAoZnJhbWVGdW5jKHRpbWVTdGVwKSA9PT0gZmFsc2UpIHJldHVybjtcclxuICAgIH1cclxuICAgIGxhc3RUaW1lID0gdGltZTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZSk7XHJcbiAgfVxyXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcnVuTGV2ZWwobGV2ZWw6IExldmVsLCBEaXNwbGF5OiB0eXBlb2YgRE9NRGlzcGxheSkge1xyXG4gIGxldCBkaXNwbGF5ID0gbmV3IERpc3BsYXkoZG9jdW1lbnQuYm9keSwgbGV2ZWwpO1xyXG4gIGxldCBzdGF0ZSA9IFN0YXRlLnN0YXJ0KGxldmVsKTtcclxuICBsZXQgZW5kaW5nID0gMTtcclxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICBydW5BbmltYXRpb24odGltZSA9PiB7XHJcbiAgICAgIHN0YXRlID0gc3RhdGUudXBkYXRlKHRpbWUsIGFycm93S2V5cyk7XHJcbiAgICAgIGRpc3BsYXkuc3luY1N0YXRlKHN0YXRlKTtcclxuXHJcbiAgICAgIGlmIChzdGF0ZS5zdGF0dXMgPT09ICdwbGF5aW5nJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgfSBlbHNlIGlmIChlbmRpbmcgPiAwKSB7XHJcbiAgICAgICAgZW5kaW5nIC09IHRpbWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRpc3BsYXkuY2xlYXIoKTtcclxuICAgICAgICByZXNvbHZlKHN0YXRlLnN0YXR1cyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkdhbWUocGxhbnM6IHN0cmluZ1tdLCBEaXNwbGF5OiB0eXBlb2YgRE9NRGlzcGxheSkge1xyXG4gIGxldCBsaWZlcyA9IDU7XHJcbiAgZm9yIChsZXQgbGV2ZWwgPSAwOyBsZXZlbCA8IHBsYW5zLmxlbmd0aDspIHtcclxuICAgIGxldCBzdGF0dXMgPSBhd2FpdCBydW5MZXZlbChuZXcgTGV2ZWwocGxhbnNbbGV2ZWxdKSwgRGlzcGxheSk7XHJcbiAgICBpZiAoc3RhdHVzID09PSAnd29uJykgbGV2ZWwrKztcclxuICAgIGlmIChzdGF0dXMgPT09ICdsb3N0Jykge1xyXG4gICAgICBjb25zb2xlLmxvZyhgJHstLWxpZmVzfSDQttC40LfQvdC10LlgKTtcclxuICAgICAgaWYgKGxpZmVzID09PSAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9GC0Ysg0L/RgNC+0LjQs9GA0LDQuycpO1xyXG4gICAgICAgIGxldmVsID0gMDtcclxuICAgICAgICBsaWZlcyA9IDU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgY29uc29sZS5sb2coJ9GC0Ysg0L/QvtCx0LXQtNC40LshJyk7XHJcbn1cclxuIiwiZXhwb3J0IGZ1bmN0aW9uIHRyYWNrS2V5cyhrZXlzOiBzdHJpbmdbXSkge1xyXG4gIGxldCBkb3duID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICBmdW5jdGlvbiB0cmFjayhldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgaWYgKGtleXMuaW5jbHVkZXMoZXZlbnQua2V5KSkge1xyXG4gICAgICBkb3duW2V2ZW50LmtleV0gPSBldmVudC50eXBlID09PSAna2V5ZG93bic7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIH1cclxuICB9XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0cmFjayk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdHJhY2spO1xyXG4gIHJldHVybiBkb3duO1xyXG59XHJcbiIsImltcG9ydCB7IGxldmVsMSwgbGV2ZWwyIH0gZnJvbSAnLi9zcmMvbGV2ZWxzJztcclxuaW1wb3J0IHsgcnVuR2FtZSB9IGZyb20gXCIuL3NyYy9ydW5GdW5jdGlvbnNcIlxyXG5pbXBvcnQgeyBET01EaXNwbGF5IH0gZnJvbSAnLi9zcmMvRGlzcGxheXMvRE9NRGlzcGxheSc7XHJcblxyXG5ydW5HYW1lKFtsZXZlbDEsIGxldmVsMl0sIERPTURpc3BsYXkpIiwiaW1wb3J0IHsgZWx0IH0gZnJvbSBcIi4uL2hlbHBlcnNcIlxyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gXCIuLi9TdGF0ZVwiO1xyXG5pbXBvcnQgeyBkcmF3QWN0b3JzLCBkcmF3R3JpZCB9IGZyb20gXCIuLi9kcmF3RnVuY3Rpb25zXCI7XHJcbmltcG9ydCB7IExldmVsIH0gZnJvbSBcIi4uL0xldmVsXCI7XHJcbmltcG9ydCB7IHNjYWxlIH0gZnJvbSBcIi4uL2NvbnN0c1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERPTURpc3BsYXkge1xyXG4gIGRvbTogSFRNTEVsZW1lbnQ7XHJcbiAgYWN0b3JMYXllcjogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJlbnQ6IEhUTUxFbGVtZW50LCBsZXZlbDogTGV2ZWwpIHtcclxuICAgIHRoaXMuZG9tID0gZWx0KCdkaXYnLCB7IGNsYXNzOiAnZ2FtZScgfSwgZHJhd0dyaWQobGV2ZWwpKTtcclxuICAgIHRoaXMuYWN0b3JMYXllciA9IG51bGw7XHJcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5kb20pO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7IHRoaXMuZG9tLnJlbW92ZSgpOyB9XHJcblxyXG4gIHN5bmNTdGF0ZShzdGF0ZTogU3RhdGUpIHtcclxuICAgIHRoaXMuYWN0b3JMYXllcj8ucmVtb3ZlKClcclxuICAgIHRoaXMuYWN0b3JMYXllciA9IGRyYXdBY3RvcnMoc3RhdGUuYWN0b3JzKTtcclxuICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuYWN0b3JMYXllcik7XHJcbiAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBgZ2FtZSAke3N0YXRlLnN0YXR1c31gO1xyXG4gICAgdGhpcy5zY3JvbGxQbGF5ZXJJbnRvVmlldyhzdGF0ZSk7XHJcbiAgfTtcclxuXHJcbiAgc2Nyb2xsUGxheWVySW50b1ZpZXcoc3RhdGU6IFN0YXRlKSB7XHJcbiAgICBsZXQgd2lkdGggPSB0aGlzLmRvbS5jbGllbnRXaWR0aDtcclxuICAgIGxldCBoZWlnaHQgPSB0aGlzLmRvbS5jbGllbnRIZWlnaHQ7XHJcbiAgICBsZXQgbWFyZ2luID0gd2lkdGggLyAzO1xyXG5cclxuICAgIGxldCBsZWZ0ID0gdGhpcy5kb20uc2Nyb2xsTGVmdDtcclxuICAgIGxldCByaWdodCA9IGxlZnQgKyB3aWR0aDtcclxuXHJcbiAgICBsZXQgdG9wID0gdGhpcy5kb20uc2Nyb2xsVG9wO1xyXG4gICAgbGV0IGJvdHRvbSA9IHRvcCArIGhlaWdodDtcclxuXHJcbiAgICBsZXQgcGxheWVyID0gc3RhdGUucGxheWVyO1xyXG4gICAgbGV0IGNlbnRlciA9IHBsYXllci5wb3MucGx1cyhwbGF5ZXIuc2l6ZS50aW1lcygwLjUpKVxyXG4gICAgICAudGltZXMoc2NhbGUpO1xyXG5cclxuICAgIGlmIChjZW50ZXIueCA8IGxlZnQgKyBtYXJnaW4pIHtcclxuICAgICAgdGhpcy5kb20uc2Nyb2xsTGVmdCA9IGNlbnRlci54IC0gbWFyZ2luO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoY2VudGVyLnggPiByaWdodCAtIG1hcmdpbikge1xyXG4gICAgICB0aGlzLmRvbS5zY3JvbGxMZWZ0ID0gY2VudGVyLnggKyBtYXJnaW4gLSB3aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2VudGVyLnkgPCB0b3AgKyBtYXJnaW4pIHtcclxuICAgICAgdGhpcy5kb20uc2Nyb2xsVG9wID0gY2VudGVyLnkgLSBtYXJnaW47XHJcblxyXG4gICAgfSBlbHNlIGlmIChjZW50ZXIueCA+IGJvdHRvbSAtIG1hcmdpbikge1xyXG4gICAgICB0aGlzLmRvbS5zY3JvbGxUb3AgPSBjZW50ZXIueSArIG1hcmdpbiAtIGhlaWdodDtcclxuICAgIH1cclxuICB9O1xyXG59IiwiaW1wb3J0IHsgSUFjdG9yIH0gZnJvbSAnLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gXCIuL2hlbHBlcnNcIjtcclxuaW1wb3J0IHsgTGV2ZWwgfSBmcm9tIFwiLi9MZXZlbFwiO1xyXG5pbXBvcnQgeyBzY2FsZSB9IGZyb20gXCIuL2NvbnN0c1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdHcmlkKGxldmVsOiBMZXZlbCkge1xyXG4gIHJldHVybiBlbHQoJ3RhYmxlJywge1xyXG4gICAgY2xhc3M6ICdiYWNrZ3JvdW5kJyxcclxuICAgIHN0eWxlOiBgd2lkdGg6ICR7bGV2ZWwud2lkdGggKiBzY2FsZX1weGBcclxuICB9LCAuLi5sZXZlbC5yb3dzLm1hcChyb3cgPT4gZWx0KCd0cicsIHsgc3R5bGU6IGBoZWlnaHQ6ICR7c2NhbGV9cHhgIH0sXHJcbiAgICAuLi5yb3cubWFwKHR5cGUgPT4gZWx0KCd0ZCcsIHsgY2xhc3M6IHR5cGUgfSkpKSkpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3QWN0b3JzKGFjdG9yczogSUFjdG9yW10pIHtcclxuICByZXR1cm4gZWx0KCdkaXYnLCB7fSwgLi4uYWN0b3JzLm1hcChhY3RvciA9PiB7XHJcbiAgICBsZXQgcmVjdCA9IGVsdCgnZGl2JywgeyBjbGFzczogYGFjdG9yICR7YWN0b3IudHlwZX1gIH0pO1xyXG4gICAgcmVjdC5zdHlsZS53aWR0aCA9IGAke2FjdG9yLnNpemUueCAqIHNjYWxlfXB4YFxyXG4gICAgcmVjdC5zdHlsZS5oZWlnaHQgPSBgJHthY3Rvci5zaXplLnkgKiBzY2FsZX1weGBcclxuICAgIHJlY3Quc3R5bGUubGVmdCA9IGAke2FjdG9yLnBvcy54ICogc2NhbGV9cHhgXHJcbiAgICByZWN0LnN0eWxlLnRvcCA9IGAke2FjdG9yLnBvcy55ICogc2NhbGV9cHhgXHJcbiAgICByZXR1cm4gcmVjdDtcclxuICB9KSk7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==